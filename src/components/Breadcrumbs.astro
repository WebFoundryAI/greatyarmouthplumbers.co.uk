---
import { Icon } from 'astro-icon/components';

export interface BreadcrumbItem {
  label: string;
  href?: string;
}

export interface Props {
  items: BreadcrumbItem[];
}

const { items } = Astro.props;
---

<nav aria-label="Breadcrumb" class="py-3">
  <ol
    class="flex flex-wrap items-center gap-1 text-sm text-stone-500"
    itemscope
    itemtype="https://schema.org/BreadcrumbList"
  >
    {items.map((item, index) => {
      const isLast = index === items.length - 1;
      return (
        <li
          class="flex items-center gap-1"
          itemprop="itemListElement"
          itemscope
          itemtype="https://schema.org/ListItem"
        >
          {index > 0 && (
            <Icon name="lucide:chevron-right" class="h-3.5 w-3.5 text-stone-400 shrink-0" />
          )}
          {isLast || !item.href ? (
            <span
              class="text-stone-700 font-medium"
              itemprop="name"
              aria-current={isLast ? 'page' : undefined}
            >
              {item.label}
            </span>
          ) : (
            <a
              href={item.href}
              class="hover:text-brand-600 transition-colors"
              itemprop="item"
            >
              <span itemprop="name">{item.label}</span>
            </a>
          )}
          <meta itemprop="position" content={String(index + 1)} />
        </li>
      );
    })}
  </ol>
</nav>
