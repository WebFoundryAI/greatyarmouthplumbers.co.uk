---
import { Icon } from 'astro-icon/components';
import { business } from '../data/business';

const navLinks = [
  { label: 'Home', href: '/' },
  { label: 'Services', href: '/services/' },
  { label: 'Areas', href: '/areas/' },
  { label: 'About', href: '/about/' },
  { label: 'Contact', href: '/contact/' },
  { label: 'Blog', href: '/plumbing-tips/' },
];
---

<header class="sticky top-0 z-50 bg-white border-b border-stone-200 shadow-sm">
  <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
    <div class="flex items-center justify-between h-16 md:h-18">

      <!-- Logo / Business name -->
      <a href="/" class="flex flex-col leading-tight group">
        <span class="font-display text-xl font-bold text-brand-900 group-hover:text-brand-700 transition-colors">
          Great Yarmouth
        </span>
        <span class="font-display text-sm text-brand-600 -mt-1">
          Plumbers
        </span>
      </a>

      <!-- Desktop navigation -->
      <nav class="hidden md:flex items-center gap-6" aria-label="Main navigation">
        {navLinks.map((link) => (
          <a
            href={link.href}
            class="text-sm font-medium text-stone-700 hover:text-brand-600 transition-colors"
          >
            {link.label}
          </a>
        ))}
      </nav>

      <!-- Phone CTA + hamburger -->
      <div class="flex items-center gap-3">
        <!-- Phone button -->
        <a
          href={business.phoneHref}
          class="inline-flex items-center gap-2 rounded-lg bg-brand-600 px-4 py-2 text-sm font-semibold text-white hover:bg-brand-700 transition-colors"
        >
          <Icon name="lucide:phone" class="h-4 w-4" />
          <span class="hidden sm:inline">{business.phone}</span>
          <span class="sm:hidden">Call Now</span>
        </a>

        <!-- Mobile hamburger -->
        <button
          id="menu-toggle"
          type="button"
          class="md:hidden inline-flex items-center justify-center rounded-lg p-2 text-stone-600 hover:bg-stone-100 transition-colors"
          aria-expanded="false"
          aria-controls="mobile-menu"
          aria-label="Toggle navigation menu"
        >
          <Icon name="lucide:menu" class="h-6 w-6" id="icon-menu" />
          <Icon name="lucide:x" class="h-6 w-6 hidden" id="icon-close" />
        </button>
      </div>
    </div>
  </div>

  <!-- Mobile drawer -->
  <div id="mobile-menu" class="hidden md:hidden border-t border-stone-200 bg-white">
    <nav class="px-4 py-4 space-y-1" aria-label="Mobile navigation">
      {navLinks.map((link) => (
        <a
          href={link.href}
          class="block rounded-lg px-3 py-2 text-base font-medium text-stone-700 hover:bg-brand-50 hover:text-brand-600 transition-colors"
        >
          {link.label}
        </a>
      ))}
    </nav>
  </div>
</header>

<script>
  const toggle = document.getElementById('menu-toggle');
  const menu = document.getElementById('mobile-menu');
  const iconMenu = document.getElementById('icon-menu');
  const iconClose = document.getElementById('icon-close');

  if (toggle && menu && iconMenu && iconClose) {
    toggle.addEventListener('click', () => {
      const isOpen = menu.classList.toggle('hidden');
      toggle.setAttribute('aria-expanded', String(!isOpen));
      iconMenu.classList.toggle('hidden');
      iconClose.classList.toggle('hidden');
    });
  }
</script>
