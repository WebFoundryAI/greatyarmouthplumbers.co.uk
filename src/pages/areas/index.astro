---
import BaseLayout from '../../layouts/BaseLayout.astro';
import Breadcrumbs from '../../components/Breadcrumbs.astro';
import { Icon } from 'astro-icon/components';
import { business } from '../../data/business';
import { serviceAreas } from '../../data/serviceAreas';
import { areaUrl, contactUrl } from '../../lib/urls';

const title = 'Areas We Serve | Great Yarmouth Plumbers';
const description = 'Great Yarmouth Plumbers serves homes and businesses across Norfolk and Suffolk. Find your area for local response times. Call 01493 334000.';

const breadcrumbs = [
  { label: 'Home', href: '/' },
  { label: 'Areas' },
];

const primary = serviceAreas.filter((a) => a.priority === 'primary');
const secondary = serviceAreas.filter((a) => a.priority === 'secondary');
const tertiary = serviceAreas.filter((a) => a.priority === 'tertiary');
---

<BaseLayout {title} {description}>
  <Fragment slot="head">
    <script type="application/ld+json" set:html={JSON.stringify({
      '@context': 'https://schema.org',
      '@type': 'WebPage',
      name: title,
      description: description,
      url: `${business.website}/areas/`,
      breadcrumb: {
        '@type': 'BreadcrumbList',
        itemListElement: [
          { '@type': 'ListItem', position: 1, name: 'Home', item: business.website },
          { '@type': 'ListItem', position: 2, name: 'Areas', item: `${business.website}/areas/` },
        ],
      },
    })} />
  </Fragment>

  <Breadcrumbs items={breadcrumbs} />

  <!-- Hero -->
  <section class="bg-gradient-to-br from-brand-900 to-brand-800 py-16 text-white">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
      <div class="max-w-3xl">
        <h1 class="text-4xl font-extrabold tracking-tight sm:text-5xl">Areas We Serve</h1>
        <p class="mt-4 text-lg text-brand-100">
          {business.name} provides professional plumbing services across Great Yarmouth and the wider Norfolk and Suffolk area. Find your town below to see local response times and available services.
        </p>
      </div>
    </div>
  </section>

  <!-- Primary Areas -->
  {primary.length > 0 && (
    <section class="bg-white py-16">
      <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
        <h2 class="mb-8 text-2xl font-extrabold text-gray-900">Primary Service Areas</h2>
        <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
          {primary.map((area) => (
            <a
              href={areaUrl(area.slug)}
              class="group flex flex-col rounded-xl bg-white p-6 shadow-md ring-1 ring-gray-100 transition hover:-translate-y-1 hover:shadow-lg"
            >
              <div class="mb-4 flex items-center gap-3">
                <div class="flex h-10 w-10 items-center justify-center rounded-full bg-brand-600 text-white">
                  <Icon name="lucide:map-pin" class="h-5 w-5" />
                </div>
                <div>
                  <h3 class="text-lg font-bold text-gray-900 group-hover:text-brand-700">{area.name}</h3>
                  <p class="text-sm text-gray-500">{area.county}</p>
                </div>
              </div>
              <p class="flex-1 text-sm leading-relaxed text-gray-600">{area.description}</p>
              <div class="mt-4 flex items-center justify-between border-t border-gray-100 pt-4">
                <span class="flex items-center gap-1 text-sm text-gray-500">
                  <Icon name="lucide:clock" class="h-4 w-4" />
                  {area.responseTime}
                </span>
                <span class="text-sm font-semibold text-brand-600 group-hover:text-brand-700">
                  View details &rarr;
                </span>
              </div>
            </a>
          ))}
        </div>
      </div>
    </section>
  )}

  <!-- Secondary Areas -->
  {secondary.length > 0 && (
    <section class="bg-gray-50 py-16">
      <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
        <h2 class="mb-8 text-2xl font-extrabold text-gray-900">Extended Service Areas</h2>
        <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
          {secondary.map((area) => (
            <a
              href={areaUrl(area.slug)}
              class="group flex flex-col rounded-xl bg-white p-6 shadow-md ring-1 ring-gray-100 transition hover:-translate-y-1 hover:shadow-lg"
            >
              <div class="mb-4 flex items-center gap-3">
                <div class="flex h-10 w-10 items-center justify-center rounded-full bg-brand-100 text-brand-600">
                  <Icon name="lucide:map-pin" class="h-5 w-5" />
                </div>
                <div>
                  <h3 class="text-lg font-bold text-gray-900 group-hover:text-brand-700">{area.name}</h3>
                  <p class="text-sm text-gray-500">{area.county}</p>
                </div>
              </div>
              <p class="flex-1 text-sm leading-relaxed text-gray-600">{area.description}</p>
              <div class="mt-4 flex items-center justify-between border-t border-gray-100 pt-4">
                <span class="flex items-center gap-1 text-sm text-gray-500">
                  <Icon name="lucide:clock" class="h-4 w-4" />
                  {area.responseTime}
                </span>
                <span class="text-sm font-semibold text-brand-600 group-hover:text-brand-700">
                  View details &rarr;
                </span>
              </div>
            </a>
          ))}
        </div>
      </div>
    </section>
  )}

  <!-- Tertiary Areas -->
  {tertiary.length > 0 && (
    <section class="bg-white py-16">
      <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
        <h2 class="mb-8 text-2xl font-extrabold text-gray-900">Additional Areas</h2>
        <div class="grid gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4">
          {tertiary.map((area) => (
            <a
              href={areaUrl(area.slug)}
              class="group flex items-center gap-3 rounded-lg bg-gray-50 p-4 transition hover:bg-brand-50"
            >
              <Icon name="lucide:map-pin" class="h-5 w-5 flex-shrink-0 text-brand-600" />
              <div>
                <span class="font-medium text-gray-900 group-hover:text-brand-700">{area.name}</span>
                <span class="ml-2 text-sm text-gray-500">{area.responseTime}</span>
              </div>
            </a>
          ))}
        </div>
      </div>
    </section>
  )}

  <!-- Local Expertise -->
  <section class="bg-gray-50 py-16">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
      <div class="max-w-3xl">
        <h2 class="text-2xl font-extrabold text-gray-900">Local Plumbing Experts Across Norfolk and Suffolk</h2>
        <div class="mt-6 space-y-4 text-gray-600 leading-relaxed">
          <p>
            {business.name} is based in the heart of Great Yarmouth and provides plumbing services to homes and businesses across a wide area of Norfolk and Suffolk. Because we are local, we understand the specific plumbing challenges that properties in this region face, from ageing Victorian pipework in seaside terraces to modern drainage systems on new-build estates.
          </p>
          <p>
            Coastal properties are particularly prone to corrosion and damp-related plumbing issues. Salt air accelerates the wear on exposed pipework, and many older homes in Great Yarmouth, Gorleston-on-Sea, and Caister-on-Sea still rely on original lead or galvanised pipes that need upgrading. Our team has years of experience working in these conditions and can advise on the best long-term solutions for your property.
          </p>
          <p>
            Properties near the Norfolk Broads and the River Bure, including those in Acle, Martham, and Stalham, can experience higher ground-water levels that affect drainage and sewer systems. We regularly carry out CCTV drain surveys and sewer line repairs in these areas to keep systems running smoothly.
          </p>
          <p>
            No matter where you are in our service area, we aim to provide fast response times and reliable service. Our primary coverage areas around Great Yarmouth benefit from response times as quick as 10 to 15 minutes, while our extended areas are typically reached within 20 to 35 minutes. Call us on {business.phone} to check availability in your area.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- CTA -->
  <section class="bg-brand-900 py-16">
    <div class="mx-auto max-w-4xl px-4 text-center sm:px-6 lg:px-8">
      <h2 class="text-3xl font-extrabold text-white">Do Not See Your Area?</h2>
      <p class="mx-auto mt-4 max-w-2xl text-lg text-brand-200">
        We may still be able to help. Give us a call and we will let you know if we can cover your location.
      </p>
      <div class="mt-8 flex flex-col items-center justify-center gap-4 sm:flex-row">
        <a
          href={business.phoneHref}
          class="inline-flex items-center gap-2 rounded-lg bg-amber-500 px-8 py-4 text-lg font-bold text-brand-900 transition hover:bg-amber-400"
        >
          <Icon name="lucide:phone" class="h-5 w-5" />
          {business.phone}
        </a>
        <a
          href={contactUrl()}
          class="inline-flex items-center gap-2 rounded-lg border-2 border-white/30 bg-white/10 px-8 py-4 text-lg font-bold text-white transition hover:bg-white/20"
        >
          Contact Us
        </a>
      </div>
    </div>
  </section>
</BaseLayout>
